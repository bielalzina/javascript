<!DOCTYPE html>
<html lang="ca">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PROVA GALETES 2</title>
    <script
      type="text/javascript"
      src="../01_FORMULARIS/js/utilitats.js"
    ></script>
    <script type="text/javascript" src="js/galetes.js"></script>
    <script type="text/javascript">
      function valida() {
        if (
          validaObligatori(
            document.getElementById("usuari").value &&
              validaObligatori(document.getElementById("contrasenya").value)
          )
        ) {
          setCookie("nomUsuari", document.getElementById("usuari").value, 4);
          setCookie(
            "passUsuari",
            document.getElementById("contrasenya").value,
            4
          );
          return true;
        } else {
          return false;
        }
      }

      window.onload = function () {
        // PREPARA PÀGINA
        document.getElementById("formulari").onsubmit = valida;
        document.getElementById("esborraGaletes").onclick = deleteAllCookies;
        // RECUPERAM COOKIES
        var cadena = "";
        var nomUser = getCookie("nomUsuari");
        console.log(nomUser);
        if (typeof nomUser != "undefined" && nomUser != null) {
          document.getElementById("usuari").value = nomUser;
          cadena += "<p>nomUsuari: " + nomUser + "</p>";
        } else {
          cadena += "<p>La COOKIE pel nom d'usuari NO està definida</p>";
        }
        var passUser = getCookie("passUsuari");
        console.log(passUser);
        if (typeof passUser != "undefined" && passUser != null) {
          document.getElementById("contrasenya").value = passUser;
          cadena += "<p>passUsuari: " + passUser + "</p>";
        } else {
          cadena += "<p>La COOKIE pel password NO està definida</p>";
        }
        document.getElementById("mostrador").innerHTML = cadena;
      };
    </script>
  </head>
  <body>
    <h1>PROVA GALETES 2</h1>
    <form action="../01_FORMULARIS/repGet.html" method="get" id="formulari">
      <p>
        <label for="usuari">NOM USUARI: </label
        ><input type="text" name="usuari" id="usuari" />
      </p>
      <p>
        <label for="password">PASSWORD: </label
        ><input type="password" name="contrasenya" id="contrasenya" />
      </p>
      <p><button type="submit">ENVIAR</button></p>
      <p><button type="button" id="esborraGaletes">ELIMINA GALETES</button></p>
    </form>
    <div id="mostrador"></div>
    <p><a href="index.html">TORNAR A L'INDEX</a></p>
  </body>
</html>
