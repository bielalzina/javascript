<!DOCTYPE html>
<html lang="ca">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PRODUCTES</title>
    <script src="js/funcionsArrays.js"></script>
    <script type="text/javascript">
      window.onload = function () {
        document.getElementById("bIntroduirPreus").onclick = function () {
          let numPreus = document.getElementById("numProductes").value;
          if (!isNaN(numPreus)) {
            numPreus = parseInt(numPreus);
            document.getElementById("numProductes").readOnly = true;
            document.getElementById("bIntroduirPreus").disabled = true;
            let cadena = "";
            for (let i = 1; i <= numPreus; i++) {
              cadena +=
                '<p><label for="preu' +
                i +
                '">PREU PRODUCTE: ' +
                i +
                ': </label><input type="number" id="preu' +
                i +
                '" name="preu' +
                i +
                '"></p>';
            }
            document.getElementById("preus").innerHTML = cadena;

            document.getElementById("bCalcularTotal").onclick = function () {
              let total = 0;
              let preu = 0;
              for (let i = 1; i <= numPreus; i++) {
                preu = document.getElementById("preu" + i).value;
                if (!isNaN(preu)) {
                  total += parseInt(preu);
                }
              }
              document.getElementById("total").innerHTML =
                "TOTAL: <strong>" + total + "</strong>";
            };
          }
        };
      };
    </script>
  </head>
  <body>
    <h1>PRODUCTES</h1>

    <form>
      <p>
        <label for="quantitat">QUANTITAT DE PRODUCTES: </label>
        <input type="number" id="numProductes" name="numProductes" />
      </p>
      <p><button type="button" id="bIntroduirPreus">INTRODUIR PREUS</button></p>
    </form>

    <form action="repGet.html">
      <div id="preus"></div>
      <p><button type="button" id="bCalcularTotal">CALCULAR TOTAL</button></p>
      <div id="total"></div>
      <p><button type="submit">ENVIAR PREUS</button></p>
    </form>

    <p><a href="index.html">TORNAR</a></p>
  </body>
</html>
